<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SupplierVault Pro - Enterprise Compliance Management</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        [v-cloak] { display: none !important; }
        
        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
        
        .slide-up-enter-active, .slide-up-leave-active { transition: all 0.3s ease; }
        .slide-up-enter-from { opacity: 0; transform: translateY(30px); }
        .slide-up-leave-to { opacity: 0; transform: translateY(-30px); }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .risk-high { @apply bg-red-100 text-red-800 border-red-200; }
        .risk-medium { @apply bg-yellow-100 text-yellow-800 border-yellow-200; }
        .risk-low { @apply bg-green-100 text-green-800 border-green-200; }
        
        .compliance-excellent { @apply bg-green-500; }
        .compliance-good { @apply bg-blue-500; }
        .compliance-acceptable { @apply bg-yellow-500; }
        .compliance-critical { @apply bg-red-500; }
        
        .nav-active { @apply bg-blue-600 text-white; }
        .nav-inactive { @apply text-gray-600 hover:text-blue-600 hover:bg-blue-50; }
        
        .table-hover:hover { @apply bg-gray-50; }
        
        .card { @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6; }
        .card-header { @apply border-b border-gray-200 pb-4 mb-4; }
        .metric-card { @apply bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-6 shadow-lg; }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            min-width: 300px;
            padding: 16px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .toast.success { background-color: #10b981; }
        .toast.error { background-color: #ef4444; }
        .toast.warning { background-color: #f59e0b; }
        .toast.info { background-color: #3b82f6; }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div id="app" v-cloak>
        <!-- Loading Overlay -->
        <div v-if="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-lg p-8 text-center">
                <div class="loading-spinner mx-auto mb-4"></div>
                <p class="text-gray-600">Loading SupplierVault Pro...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <transition name="slide-up">
            <div v-if="toast.show" :class="['toast', toast.type]">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <i :class="getToastIcon(toast.type)" class="mr-2"></i>
                        <span>{{ toast.message }}</span>
                    </div>
                    <button @click="hideToast" class="ml-4 text-white hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </transition>

        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-shield-alt text-blue-600 text-2xl"></i>
                            <h1 class="text-xl font-bold text-gray-900">SupplierVault Pro</h1>
                        </div>
                        <div class="hidden md:block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                            🎯 Targeting $57B Market
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2 text-sm text-gray-600">
                            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                            <span>DATABASE CONNECTED</span>
                        </div>
                        <div class="flex items-center space-x-2 text-gray-700">
                            <i class="fas fa-user-circle text-xl"></i>
                            <span class="font-medium">Salim Kuitov</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-8">
                    <button 
                        v-for="section in navigation" 
                        :key="section.key"
                        @click="currentSection = section.key"
                        :class="[
                            'flex items-center space-x-2 px-4 py-4 border-b-2 font-medium text-sm transition-colors',
                            currentSection === section.key 
                                ? 'border-blue-500 text-blue-600' 
                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                        ]">
                        <i :class="section.icon"></i>
                        <span>{{ section.name }}</span>
                        <span v-if="section.badge" class="bg-red-500 text-white text-xs px-2 py-1 rounded-full">
                            {{ section.badge }}
                        </span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <!-- Dashboard Section -->
            <div v-if="currentSection === 'dashboard'">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Executive Dashboard</h2>
                    <p class="text-gray-600">Real-time supplier compliance overview for {{ organizationName }}</p>
                </div>

                <!-- KPI Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="metric-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-200 text-sm font-medium">Total Suppliers</p>
                                <p class="text-3xl font-bold">{{ dashboardData.totalSuppliers || 0 }}</p>
                                <p class="text-blue-200 text-xs mt-1">From database</p>
                            </div>
                            <i class="fas fa-building text-4xl text-blue-200"></i>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-6 shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-200 text-sm font-medium">Compliant</p>
                                <p class="text-3xl font-bold">{{ dashboardData.compliantSuppliers || 0 }}</p>
                                <p class="text-green-200 text-xs mt-1">{{ dashboardData.compliancePercentage || 0 }}%</p>
                            </div>
                            <i class="fas fa-check-circle text-4xl text-green-200"></i>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-lg p-6 shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-yellow-200 text-sm font-medium">Expiring Soon</p>
                                <p class="text-3xl font-bold">{{ dashboardData.expiringSoon || 0 }}</p>
                                <p class="text-yellow-200 text-xs mt-1">Next 30 days</p>
                            </div>
                            <i class="fas fa-clock text-4xl text-yellow-200"></i>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg p-6 shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-red-200 text-sm font-medium">High Risk</p>
                                <p class="text-3xl font-bold">{{ dashboardData.highRiskSuppliers || 0 }}</p>
                                <p class="text-red-200 text-xs mt-1">Category A</p>
                            </div>
                            <i class="fas fa-exclamation-triangle text-4xl text-red-200"></i>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- Risk Distribution Chart -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="text-lg font-semibold text-gray-900">Risk Distribution</h3>
                        </div>
                        <div class="relative h-64">
                            <canvas ref="riskChart"></canvas>
                        </div>
                    </div>

                    <!-- Compliance Trends Chart -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="text-lg font-semibold text-gray-900">Compliance Trends</h3>
                        </div>
                        <div class="relative h-64">
                            <canvas ref="trendsChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Activity and Suppliers Row -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Recent Activity -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="text-lg font-semibold text-gray-900">Recent Activity</h3>
                        </div>
                        <div class="space-y-4 max-h-96 overflow-y-auto">
                            <div v-for="activity in recentActivities.slice(0, 8)" :key="activity.id" 
                                 class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                                <div class="flex-shrink-0">
                                    <i :class="getActivityIcon(activity.action)" class="text-blue-500"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-medium text-gray-900">
                                        {{ activity.action }} {{ activity.resource }}
                                    </p>
                                    <p class="text-xs text-gray-500">{{ activity.details }}</p>
                                    <p class="text-xs text-gray-400 mt-1">{{ formatDate(activity.created_at) }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top Performing Suppliers -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="text-lg font-semibold text-gray-900">Top Performing Suppliers</h3>
                        </div>
                        <div class="space-y-3">
                            <div v-for="supplier in topPerformingSuppliers.slice(0, 6)" :key="supplier.id"
                                 class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <div :class="[
                                        'w-3 h-3 rounded-full',
                                        supplier.risk_category === 'A' ? 'bg-red-500' :
                                        supplier.risk_category === 'B' ? 'bg-yellow-500' : 'bg-green-500'
                                    ]"></div>
                                    <div>
                                        <p class="font-medium text-gray-900 text-sm">{{ supplier.name }}</p>
                                        <p class="text-xs text-gray-500">Risk {{ supplier.risk_category }}</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="font-semibold text-sm text-green-600">{{ supplier.iso_compliance_score }}%</p>
                                    <p class="text-xs text-gray-500">Compliance</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Suppliers Section -->
            <div v-if="currentSection === 'suppliers'">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Supplier Management</h2>
                    <p class="text-gray-600">Manage your supplier database and compliance status</p>
                </div>

                <!-- Filters and Actions -->
                <div class="bg-white rounded-lg shadow-sm border p-6 mb-6">
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 items-end">
                        <div class="flex-1">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Search Suppliers</label>
                            <div class="relative">
                                <input 
                                    v-model="supplierSearch"
                                    type="text"
                                    placeholder="Search by name, type, or contact..."
                                    class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Risk Category</label>
                            <select v-model="selectedRiskCategory" 
                                    class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">All Categories</option>
                                <option value="A">High Risk (A)</option>
                                <option value="B">Medium Risk (B)</option>
                                <option value="C">Low Risk (C)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select v-model="selectedStatus" 
                                    class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">All Statuses</option>
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                                <option value="Suspended">Suspended</option>
                            </select>
                        </div>
                        <button @click="showAddSupplierModal = true"
                                class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2">
                            <i class="fas fa-plus"></i>
                            <span>Add Supplier</span>
                        </button>
                    </div>
                </div>

                <!-- Suppliers Table -->
                <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supplier</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Products</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Compliance</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Next Audit</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr v-for="supplier in filteredSuppliers" :key="supplier.id" class="table-hover">
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center space-x-3">
                                            <div :class="[
                                                'w-3 h-3 rounded-full',
                                                supplier.status === 'Active' ? 'bg-green-500' : 'bg-gray-400'
                                            ]"></div>
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">{{ supplier.name }}</div>
                                                <div class="text-sm text-gray-500">{{ supplier.status }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span :class="[
                                            'inline-flex px-2 py-1 text-xs font-semibold rounded-full border',
                                            supplier.risk_category === 'A' ? 'risk-high' :
                                            supplier.risk_category === 'B' ? 'risk-medium' : 'risk-low'
                                        ]">
                                            Category {{ supplier.risk_category }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                                        {{ supplier.supplier_type || 'Direct' }}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {{ formatProductCategories(supplier.product_categories) }}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center space-x-2">
                                            <div class="flex-1 bg-gray-200 rounded-full h-2">
                                                <div :class="[
                                                    'h-2 rounded-full transition-all',
                                                    supplier.iso_compliance_score >= 90 ? 'compliance-excellent' :
                                                    supplier.iso_compliance_score >= 80 ? 'compliance-good' :
                                                    supplier.iso_compliance_score >= 70 ? 'compliance-acceptable' : 'compliance-critical'
                                                ]" :style="{ width: supplier.iso_compliance_score + '%' }"></div>
                                            </div>
                                            <span class="text-sm font-medium">{{ supplier.iso_compliance_score }}%</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {{ formatDate(supplier.next_audit_due) }}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                                        <button @click="viewSupplier(supplier)" class="text-blue-600 hover:text-blue-900">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button @click="editSupplier(supplier)" class="text-yellow-600 hover:text-yellow-900">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button @click="deleteSupplier(supplier)" class="text-red-600 hover:text-red-900">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Documents Section -->
            <div v-if="currentSection === 'documents'">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Document Management</h2>
                    <p class="text-gray-600">Manage supplier certificates, policies, and compliance documents</p>
                </div>

                <!-- Upload Zone -->
                <div class="bg-white rounded-lg shadow-sm border p-8 mb-6">
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">Upload Documents</h3>
                        <p class="text-gray-500 mb-4">Drag and drop files here or click to browse</p>
                        <button class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Choose Files
                        </button>
                        <p class="text-xs text-gray-400 mt-2">Supported formats: PDF, DOC, DOCX, XLS, XLSX (Max 10MB)</p>
                    </div>
                </div>

                <!-- Document Filters -->
                <div class="bg-white rounded-lg shadow-sm border p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Document Type</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">All Types</option>
                                <option value="Certificate">Certificate</option>
                                <option value="Policy">Policy</option>
                                <option value="MSDS">MSDS</option>
                                <option value="Test_Report">Test Report</option>
                                <option value="Audit_Report">Audit Report</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Supplier</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">All Suppliers</option>
                                <option v-for="supplier in suppliers" :key="supplier.id" :value="supplier.id">
                                    {{ supplier.name }}
                                </option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">All Statuses</option>
                                <option value="Valid">Valid</option>
                                <option value="Expired">Expired</option>
                                <option value="Pending_Review">Pending Review</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Expiry</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">All Documents</option>
                                <option value="expiring_30">Expiring in 30 days</option>
                                <option value="expiring_90">Expiring in 90 days</option>
                                <option value="expired">Already expired</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Documents Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div v-for="document in sampleDocuments" :key="document.id" class="bg-white rounded-lg shadow-sm border p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <i class="fas fa-file-pdf text-blue-600"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium text-gray-900">{{ document.name }}</h4>
                                    <p class="text-sm text-gray-500">{{ document.supplier_name }}</p>
                                </div>
                            </div>
                            <div class="flex space-x-1">
                                <button class="text-gray-400 hover:text-blue-600" title="Download">
                                    <i class="fas fa-download"></i>
                                </button>
                                <button class="text-gray-400 hover:text-green-600" title="View">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Type:</span>
                                <span class="font-medium">{{ document.type }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Uploaded:</span>
                                <span>{{ formatDate(document.upload_date) }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Expires:</span>
                                <span :class="[
                                    document.days_until_expiry <= 30 ? 'text-red-600 font-medium' :
                                    document.days_until_expiry <= 90 ? 'text-yellow-600' : 'text-green-600'
                                ]">{{ formatDate(document.expiry_date) }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Size:</span>
                                <span>{{ formatFileSize(document.file_size) }}</span>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t">
                            <span :class="[
                                'inline-flex px-2 py-1 text-xs font-medium rounded-full',
                                document.status === 'Valid' ? 'bg-green-100 text-green-800' :
                                document.status === 'Expired' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800'
                            ]">
                                {{ document.status }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Assessments Section -->
            <div v-if="currentSection === 'assessments'">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-gray-900 mb-2">Assessment Management</h2>
                    <p class="text-gray-600">Schedule and track supplier assessments and audits</p>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-lg shadow-sm border p-6 mb-6">
                    <div class="flex flex-wrap gap-4">
                        <button class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2">
                            <i class="fas fa-plus"></i>
                            <span>Schedule Assessment</span>
                        </button>
                        <button class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2">
                            <i class="fas fa-calendar-alt"></i>
                            <span>View Calendar</span>
                        </button>
                        <button class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2">
                            <i class="fas fa-chart-bar"></i>
                            <span>Assessment Reports</span>
                        </button>
                    </div>
                </div>

                <!-- Assessments Table -->
                <div class="bg-white rounded-lg shadow-sm border overflow-hidden">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">Scheduled Assessments</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supplier</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Standard</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Score</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr v-for="assessment in sampleAssessments" :key="assessment.id" class="table-hover">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                        {{ assessment.supplier_name }}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {{ assessment.standard_name }}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {{ assessment.assessment_type }}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                        {{ formatDate(assessment.scheduled_date) }}
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span :class="[
                                            'inline-flex px-2 py-1 text-xs font-semibold rounded-full',
                                            assessment.status === 'Completed' ? 'bg-green-100 text-green-800' :
                                            assessment.status === 'In_Progress' ? 'bg-blue-100 text-blue-800' :
                                            assessment.status === 'Scheduled' ? 'bg-yellow-100 text-yellow-800' :
                                            'bg-gray-100 text-gray-800'
                                        ]">
                                            {{ assessment.status }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        {{ assessment.overall_score || 'Pending' }}%
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                                        <button class="text-blue-600 hover:text-blue-900">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-900">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <!-- Add Supplier Modal -->
        <div v-if="showAddSupplierModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl m-4 max-h-screen overflow-y-auto">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-gray-900">Add New Supplier</h3>
                    <button @click="showAddSupplierModal = false" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form @submit.prevent="addSupplier" class="p-6 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Supplier Name *</label>
                            <input v-model="newSupplier.name" type="text" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Legal Name</label>
                            <input v-model="newSupplier.legal_name" type="text" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Risk Category *</label>
                            <select v-model="newSupplier.risk_category" required 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Select Risk Category</option>
                                <option value="A">A - High Risk</option>
                                <option value="B">B - Medium Risk</option>
                                <option value="C">C - Low Risk</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Supplier Type</label>
                            <select v-model="newSupplier.supplier_type" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="Direct">Direct</option>
                                <option value="Indirect">Indirect</option>
                                <option value="Service">Service</option>
                                <option value="Raw_Material">Raw Material</option>
                                <option value="Critical">Critical</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Name</label>
                            <input v-model="newSupplier.contact_name" type="text" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Email</label>
                            <input v-model="newSupplier.contact_email" type="email" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Phone</label>
                            <input v-model="newSupplier.contact_phone" type="tel" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Annual Spend (EUR)</label>
                            <input v-model="newSupplier.annual_spend_eur" type="number" step="0.01" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Business Sector</label>
                        <input v-model="newSupplier.business_sector" type="text" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="flex space-x-4">
                        <label class="flex items-center">
                            <input v-model="newSupplier.business_critical" type="checkbox" class="mr-2 rounded border-gray-300">
                            <span class="text-sm text-gray-700">Business Critical</span>
                        </label>
                        <label class="flex items-center">
                            <input v-model="newSupplier.preferred_supplier" type="checkbox" class="mr-2 rounded border-gray-300">
                            <span class="text-sm text-gray-700">Preferred Supplier</span>
                        </label>
                    </div>
                    <div class="flex justify-end space-x-4 pt-6 border-t">
                        <button type="button" @click="showAddSupplierModal = false" 
                                class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Cancel
                        </button>
                        <button type="submit" 
                                class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            Add Supplier
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    loading: true,
                    currentSection: 'dashboard',
                    organizationName: 'Septona Bulgaria JSC',
                    
                    // Navigation with badges for notifications
                    navigation: [
                        { key: 'dashboard', name: 'Dashboard', icon: 'fas fa-tachometer-alt' },
                        { key: 'suppliers', name: 'Suppliers', icon: 'fas fa-building', badge: 30 },
                        { key: 'documents', name: 'Documents', icon: 'fas fa-file-alt', badge: 3 },
                        { key: 'assessments', name: 'Assessments', icon: 'fas fa-clipboard-check', badge: 1 }
                    ],
                    
                    // Dashboard Data
                    dashboardData: {
                        totalSuppliers: 30,
                        compliantSuppliers: 24,
                        compliancePercentage: 80.0,
                        highRiskSuppliers: 4,
                        expiringSoon: 3,
                        avgComplianceScore: 82.2
                    },
                    
                    riskDistribution: { high: 4, medium: 15, low: 11 },
                    
                    complianceTrends: [
                        { month: 'Jan', compliance: 78.2 },
                        { month: 'Feb', compliance: 79.1 },
                        { month: 'Mar', compliance: 80.5 },
                        { month: 'Apr', compliance: 81.2 },
                        { month: 'May', compliance: 82.0 },
                        { month: 'Jun', compliance: 82.2 }
                    ],
                    
                    recentActivities: [
                        { id: 1, action: 'UPLOAD', resource: 'Certificate', details: 'FESTO ISO 14001 certificate uploaded', created_at: '2025-09-20T10:30:00Z' },
                        { id: 2, action: 'UPDATE', resource: 'Supplier', details: 'SMC supplier information updated', created_at: '2025-09-20T09:15:00Z' },
                        { id: 3, action: 'COMPLETE', resource: 'Assessment', details: 'Industrial Parts compliance assessment completed', created_at: '2025-09-20T08:45:00Z' },
                        { id: 4, action: 'CREATE', resource: 'CAPA', details: 'Corrective action created for SENSOMAT quality issue', created_at: '2025-09-19T16:20:00Z' },
                        { id: 5, action: 'APPROVE', resource: 'Document', details: 'ТЕХНОМИКС ЕООД policy document approved', created_at: '2025-09-19T14:10:00Z' }
                    ],
                    
                    topPerformingSuppliers: [
                        { id: 11, name: 'ГЕКО', iso_compliance_score: 87.5, risk_category: 'B' },
                        { id: 27, name: 'ТОМИС', iso_compliance_score: 87.5, risk_category: 'B' },
                        { id: 3, name: 'SMC', iso_compliance_score: 87.25, risk_category: 'A' },
                        { id: 17, name: 'Bis Engineering Ltd', iso_compliance_score: 86.75, risk_category: 'B' },
                        { id: 1, name: 'SICK AG', iso_compliance_score: 85.0, risk_category: 'A' }
                    ],
                    
                    // Suppliers Data
                    suppliers: [
                        {
                            id: 1,
                            name: "SICK AG",
                            supplier_type: "Direct",
                            product_categories: ["Електроника", "Автоматизация", "Sensors"],
                            status: "Active",
                            risk_category: "A",
                            iso_compliance_score: 85.0,
                            next_audit_due: "2025-12-31"
                        },
                        {
                            id: 2,
                            name: "FESTO",
                            supplier_type: "Direct",
                            product_categories: ["Пневматика", "Автоматизация", "Industrial Controls"],
                            status: "Active",
                            risk_category: "A",
                            iso_compliance_score: 67.5,
                            next_audit_due: "2025-11-15"
                        },
                        {
                            id: 3,
                            name: "SMC",
                            supplier_type: "Direct",
                            product_categories: ["Пневматика", "Автоматизация", "Actuators"],
                            status: "Active",
                            risk_category: "A",
                            iso_compliance_score: 87.25,
                            next_audit_due: "2025-12-20"
                        },
                        {
                            id: 4,
                            name: "Industrial Parts",
                            supplier_type: "Direct",
                            product_categories: ["Индустриални компоненти"],
                            status: "Active",
                            risk_category: "B",
                            iso_compliance_score: 82.0,
                            next_audit_due: "2026-01-15"
                        },
                        {
                            id: 5,
                            name: "ТЕХНОМИКС ЕООД",
                            supplier_type: "Direct",
                            product_categories: ["Електронни компоненти", "Електрически компоненти"],
                            status: "Active",
                            risk_category: "B",
                            iso_compliance_score: 84.25,
                            next_audit_due: "2026-02-01"
                        }
                    ],
                    
                    // Sample Documents
                    sampleDocuments: [
                        {
                            id: 1,
                            name: "ISO 14001 Certificate",
                            supplier_name: "FESTO",
                            type: "Certificate",
                            upload_date: "2025-09-15",
                            expiry_date: "2025-11-12",
                            file_size: 1874381,
                            status: "Valid",
                            days_until_expiry: 50
                        },
                        {
                            id: 2,
                            name: "Quality Policy",
                            supplier_name: "SMC",
                            type: "Policy",
                            upload_date: "2025-09-10",
                            expiry_date: "2026-09-10",
                            file_size: 245678,
                            status: "Valid",
                            days_until_expiry: 365
                        },
                        {
                            id: 3,
                            name: "Safety Data Sheet",
                            supplier_name: "Industrial Parts",
                            type: "MSDS",
                            upload_date: "2025-08-20",
                            expiry_date: "2025-10-20",
                            file_size: 156789,
                            status: "Valid",
                            days_until_expiry: 28
                        }
                    ],
                    
                    // Sample Assessments
                    sampleAssessments: [
                        {
                            id: 1,
                            supplier_name: "FESTO",
                            standard_name: "ISO 14001",
                            assessment_type: "Surveillance",
                            scheduled_date: "2025-11-15",
                            status: "Scheduled",
                            overall_score: null
                        },
                        {
                            id: 2,
                            supplier_name: "SMC",
                            standard_name: "ISO 9001",
                            assessment_type: "Re-certification",
                            scheduled_date: "2025-10-30",
                            status: "In_Progress",
                            overall_score: 85
                        },
                        {
                            id: 3,
                            supplier_name: "Industrial Parts",
                            standard_name: "IATF 16949",
                            assessment_type: "Initial",
                            scheduled_date: "2025-09-25",
                            status: "Completed",
                            overall_score: 92
                        }
                    ],
                    
                    // Filters
                    supplierSearch: '',
                    selectedRiskCategory: 'all',
                    selectedStatus: 'all',
                    
                    // Modals
                    showAddSupplierModal: false,
                    
                    // New Supplier Form
                    newSupplier: {
                        name: '',
                        legal_name: '',
                        risk_category: '',
                        supplier_type: 'Direct',
                        contact_name: '',
                        contact_email: '',
                        contact_phone: '',
                        annual_spend_eur: 0,
                        business_sector: '',
                        business_critical: false,
                        preferred_supplier: false
                    },
                    
                    // Toast Notifications
                    toast: {
                        show: false,
                        type: 'info',
                        message: ''
                    },
                    
                    // Charts
                    riskChart: null,
                    trendsChart: null
                }
            },
            
            computed: {
                filteredSuppliers() {
                    let filtered = this.suppliers;
                    
                    if (this.supplierSearch) {
                        const search = this.supplierSearch.toLowerCase();
                        filtered = filtered.filter(supplier =>
                            supplier.name.toLowerCase().includes(search) ||
                            (supplier.product_categories && supplier.product_categories.some(cat => cat.toLowerCase().includes(search)))
                        );
                    }
                    
                    if (this.selectedRiskCategory !== 'all') {
                        filtered = filtered.filter(supplier => supplier.risk_category === this.selectedRiskCategory);
                    }
                    
                    if (this.selectedStatus !== 'all') {
                        filtered = filtered.filter(supplier => supplier.status === this.selectedStatus);
                    }
                    
                    return filtered;
                }
            },
            
            mounted() {
                this.initializeApp();
            },
            
            methods: {
                async initializeApp() {
                    try {
                        // Simulate API loading
                        await this.sleep(2000);
                        
                        // Initialize charts
                        this.$nextTick(() => {
                            this.initializeCharts();
                        });
                        
                        this.loading = false;
                        this.showToast('SupplierVault Pro loaded successfully', 'success');
                    } catch (error) {
                        console.error('Initialization error:', error);
                        this.showToast('Failed to load application', 'error');
                        this.loading = false;
                    }
                },
                
                initializeCharts() {
                    // Risk Distribution Pie Chart
                    if (this.$refs.riskChart) {
                        const riskCtx = this.$refs.riskChart.getContext('2d');
                        this.riskChart = new Chart(riskCtx, {
                            type: 'doughnut',
                            data: {
                                labels: ['High Risk', 'Medium Risk', 'Low Risk'],
                                datasets: [{
                                    data: [
                                        this.riskDistribution.high,
                                        this.riskDistribution.medium,
                                        this.riskDistribution.low
                                    ],
                                    backgroundColor: ['#ef4444', '#f59e0b', '#10b981'],
                                    borderWidth: 2,
                                    borderColor: '#ffffff'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'bottom'
                                    }
                                }
                            }
                        });
                    }
                    
                    // Compliance Trends Line Chart
                    if (this.$refs.trendsChart) {
                        const trendsCtx = this.$refs.trendsChart.getContext('2d');
                        this.trendsChart = new Chart(trendsCtx, {
                            type: 'line',
                            data: {
                                labels: this.complianceTrends.map(item => item.month),
                                datasets: [{
                                    label: 'Compliance %',
                                    data: this.complianceTrends.map(item => item.compliance),
                                    borderColor: '#3b82f6',
                                    backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                    fill: true,
                                    tension: 0.4
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: false
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: false,
                                        min: 70,
                                        max: 100
                                    }
                                }
                            }
                        });
                    }
                },
                
                // Navigation
                navigateTo(section) {
                    this.currentSection = section;
                },
                
                // Suppliers
                viewSupplier(supplier) {
                    this.showToast(`Viewing supplier: ${supplier.name}`, 'info');
                },
                
                editSupplier(supplier) {
                    this.showToast(`Editing supplier: ${supplier.name}`, 'info');
                },
                
                deleteSupplier(supplier) {
                    if (confirm(`Are you sure you want to deactivate ${supplier.name}?`)) {
                        this.showToast(`Supplier ${supplier.name} deactivated`, 'warning');
                    }
                },
                
                addSupplier() {
                    if (!this.newSupplier.name || !this.newSupplier.risk_category) {
                        this.showToast('Please fill in required fields', 'error');
                        return;
                    }
                    
                    // Simulate API call
                    const newId = Math.max(...this.suppliers.map(s => s.id)) + 1;
                    const supplier = {
                        id: newId,
                        ...this.newSupplier,
                        status: 'Active',
                        iso_compliance_score: 0,
                        next_audit_due: new Date(Date.now() + 365*24*60*60*1000).toISOString().split('T')[0]
                    };
                    
                    this.suppliers.push(supplier);
                    this.showAddSupplierModal = false;
                    this.resetNewSupplier();
                    this.showToast(`Supplier ${supplier.name} added successfully`, 'success');
                },
                
                resetNewSupplier() {
                    this.newSupplier = {
                        name: '',
                        legal_name: '',
                        risk_category: '',
                        supplier_type: 'Direct',
                        contact_name: '',
                        contact_email: '',
                        contact_phone: '',
                        annual_spend_eur: 0,
                        business_sector: '',
                        business_critical: false,
                        preferred_supplier: false
                    };
                },
                
                // Utility Functions
                formatDate(dateString) {
                    if (!dateString) return 'N/A';
                    try {
                        return new Date(dateString).toLocaleDateString('en-US', {
                            year: 'numeric',
                            month: 'short',
                            day: 'numeric'
                        });
                    } catch {
                        return dateString;
                    }
                },
                
                formatFileSize(bytes) {
                    if (!bytes) return '0 B';
                    const k = 1024;
                    const sizes = ['B', 'KB', 'MB', 'GB'];
                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
                },
                
                formatProductCategories(categories) {
                    if (!categories || !Array.isArray(categories)) return 'N/A';
                    return categories.slice(0, 2).join(', ') + (categories.length > 2 ? '...' : '');
                },
                
                getActivityIcon(action) {
                    const icons = {
                        'UPLOAD': 'fas fa-upload text-blue-500',
                        'UPDATE': 'fas fa-edit text-yellow-500',
                        'CREATE': 'fas fa-plus text-green-500',
                        'COMPLETE': 'fas fa-check text-green-500',
                        'APPROVE': 'fas fa-thumbs-up text-green-500',
                        'DELETE': 'fas fa-trash text-red-500'
                    };
                    return icons[action] || 'fas fa-info text-gray-500';
                },
                
                getToastIcon(type) {
                    const icons = {
                        'success': 'fas fa-check-circle',
                        'error': 'fas fa-exclamation-circle',
                        'warning': 'fas fa-exclamation-triangle',
                        'info': 'fas fa-info-circle'
                    };
                    return icons[type] || 'fas fa-info-circle';
                },
                
                // Toast Notifications
                showToast(message, type = 'info', duration = 4000) {
                    this.toast = { show: true, message, type };
                    setTimeout(() => {
                        this.hideToast();
                    }, duration);
                },
                
                hideToast() {
                    this.toast.show = false;
                },
                
                // Utility
                sleep(ms) {
                    return new Promise(resolve => setTimeout(resolve, ms));
                }
            }
        }).mount('#app');
    </script>
</body>
</html>